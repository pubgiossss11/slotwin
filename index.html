<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Slot Probability Calculator</title>
  <style>
    body { background:#000; color:#0f0; font-family: monospace; text-align:center; }
    input, button { margin:5px; padding:5px; }
    canvas { background:#111; margin-top:20px; }
  </style>
</head>
<body>
  <h1>üé∞ Slot Probability Calculator</h1>

  <label>S·ªë cu·ªôn (reels): </label>
  <input id="reels" type="number" value="3"><br>
  <label>S·ªë bi·ªÉu t∆∞·ª£ng jackpot (symbols): </label>
  <input id="symbols" type="number" value="6"><br>
  <label>S·ªë gi·ªëng nhau ƒë·ªÉ th·∫Øng: </label>
  <input id="winCount" type="number" value="3"><br>

  <button onclick="calcProb()">T√≠nh x√°c su·∫•t</button>
  <button onclick="simulate()">M√¥ ph·ªèng 10000 l·∫ßn</button>

  <h2 id="result"></h2>
  <canvas id="chart" width="400" height="300"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    function calcProb(){
      const reels = +document.getElementById("reels").value;
      const symbols = +document.getElementById("symbols").value;
      const winCount = +document.getElementById("winCount").value;

      // X√°c su·∫•t t·∫•t c·∫£ reels ƒë·ªÅu c√πng symbol
      let jackpotProb = 1 / Math.pow(symbols, reels-1);

      document.getElementById("result").innerText = 
        `X√°c su·∫•t jackpot (${winCount} gi·ªëng nhau) ‚âà ${(jackpotProb*100).toFixed(2)}%`;
    }

    async function simulate(){
      const reels = +document.getElementById("reels").value;
      const symbols = +document.getElementById("symbols").value;
      const winCount = +document.getElementById("winCount").value;

      let win=0, near=0, lose=0;

      for(let t=0;t<10000;t++){
        let arr=[];
        for(let r=0;r<reels;r++) arr.push(Math.floor(Math.random()*symbols));

        let counts={};
        arr.forEach(x=>counts[x]=(counts[x]||0)+1);
        let maxCount=Math.max(...Object.values(counts));

        if(maxCount>=winCount) win++;
        else if(maxCount===winCount-1) near++;
        else lose++;
      }

      const ctx=document.getElementById("chart").getContext("2d");
      new Chart(ctx,{
        type:"bar",
        data:{
          labels:["Win","Near","Lose"],
          datasets:[{data:[win,near,lose]}]
        }
      });
    }
  </script>
</body>
</html>
